# Work Log: January 19, 2026 - Session 02

## Session Summary

Implemented social sharing preview images, rebranded from "Fujian" to "Fuzhou Mahjong (福州麻将)", conducted comprehensive project review, and refreshed the roadmap with new priorities.

**Duration**: ~2 hours

---

## Completed Work

### 1. Social Sharing Preview (OG Image)
- Added OG image with "MAHJONG VIBES" headline and "Play with Friends" CTA
- Generated images via ChatGPT, then compressed/resized:
  - OG image: 8.4MB → 111KB (JPEG, 1200×630)
  - Icon: 304KB (PNG, 512×512)
- Used macOS `sips` for cropping and compression
- Updated layout.tsx with proper Open Graph and Twitter meta tags

**Files modified:**
- `app/public/og-image.jpg` (new)
- `app/public/icon-512.png` (new)
- `app/src/app/icon.png`
- `app/src/app/apple-icon.png`
- `app/src/app/layout.tsx`

### 2. Fuzhou Mahjong Rebrand
Replaced "Fujian Mahjong" with "Fuzhou Mahjong (福州麻将)" throughout the project.

**Rationale:**
- Research showed "福州麻将" is the dominant Chinese search term
- "Gold Rush Mahjong" only appears in one English blog — not a real keyword
- "Fuzhou" is more specific than "Fujian" (city vs province)

**Files modified:**
- `app/src/app/layout.tsx` — Meta title extended to 56 chars, description to 155 chars
- `app/src/app/page.tsx` — "福州麻将 (Fuzhou Mahjong)" subtitle
- `app/src/components/RulesModal.tsx` — Updated subtitle
- `app/README.md` — Fuzhou branding
- `app/CHANGELOG.md` — Added rebrand entries
- `.claude/CLAUDE.md` — Project description update
- `firebase-setup-guide.md` — Fuzhou branding
- `mahjong-fujian-rules.md` → renamed to `mahjong-rules.md`

### 3. Comprehensive Project Review
Conducted deep analysis using Explore agent. Key findings:

**Critical Issue:**
- Game page (`page.tsx`) is 3,665 lines — unmaintainable
- Must refactor before adding new features

**Growth Blockers Identified:**
1. No reconnection handling (30% mobile churn)
2. No PWA support (missing "Add to Home Screen")
3. No player profiles/identity (no habit loop)
4. No tutorial (high barrier for new players)
5. No matchmaking (can't find players)

**What's Working Well:**
- Authentic Fuzhou rules implementation
- Quick Play flow (15 seconds to game)
- 131 tests with CI/CD
- Mobile-first design

### 4. Roadmap Refresh
Completely reorganized `FUTURE_FEATURES.md`:

**New Structure:**
- **Critical (Tech Debt)**: Refactor game page, add hook tests
- **High Priority**: Reconnection, PWA, player profiles, tutorial, matchmaking
- **Medium Priority**: Mobile modals, opponent history, spectator, social sharing
- **Deprioritized**: Golden Dragon, tile images, replays, variants (documented but not recommended)

---

## Commits Made

```
4f9017b docs: Comprehensive roadmap refresh based on project review
91c6121 docs: Update CHANGELOG and ROADMAP for Fuzhou rebrand
f84b7b6 style: Update OG image and icons with headline + CTA
a019d6c feat: Rebrand to Fuzhou Mahjong (福州麻将) and optimize OG images
2f445cb feat: Add social sharing preview image and favicon
```

---

## Decisions Made

| Decision | Rationale |
|----------|-----------|
| Use "Fuzhou" not "Fujian" | More specific, matches Chinese app stores (福州麻将) |
| Drop "Gold Rush Mahjong" | Not a real search term — only 1 English blog uses it |
| Convert OG to JPEG | 97% size reduction with minimal quality loss |
| Crop OG image (not stretch) | Preserves proportions, cuts bottom not top |
| Deprioritize Golden Dragon bonus | Adds complexity, doesn't drive growth |
| Refactor game page = highest priority | 3,665 lines blocks all future development |

---

## Technical Notes

### Image Compression Commands Used
```bash
# Crop to 1200x630 (OG aspect ratio), favoring top of image
sips --cropOffset 50 0 -c 804 1536 input.png --out cropped.png
sips -z 630 1200 cropped.png --out resized.png
sips -s format jpeg -s formatOptions 85 resized.png --out og-image.jpg

# Resize icon to 512x512
sips -z 512 512 input.png --out icon-512.png
```

### SEO Optimization
- Title: "Mahjong Vibes — Play Fuzhou Mahjong Online with Friends" (56 chars)
- Description: "福州麻将 — Play Fuzhou Mahjong online for free. Gold tile wildcards make every game exciting. Real-time multiplayer with friends — no download required." (155 chars)
- Keywords: fuzhou mahjong, 福州麻将, fujian mahjong, multiplayer, tile game

---

## Next Session

### Start With
**Refactor game page** — Extract components before adding any new features:
- GameBoard
- PlayerCards
- CallingUI
- TimerUI
- Modals (Settings, Rules)

Use `/pre-implement` to plan the refactor.

### Then
1. Add reconnection handling (retention blocker)
2. PWA support (easy win, big distribution impact)

### Context Needed
- Read `app/src/app/room/[roomCode]/game/page.tsx` to understand current structure
- Review component extraction patterns

---

## Git Status

- **Branch**: `main`
- **Uncommitted**: None
- **Ready to push**: Already pushed
- **Stash**: Clean
